// SPDX-FileCopyrightText: Â© 2025 Robert Patton robpatton@infiniteskye.com
// SPDX-License-Identifier: Apache-2.0

package isirparser

import "testing"

var rawISIR string = "6573576f1-1a8e-449d-90ad-81dceecdb3f37b93701e-238e-474b-9b51-2d89b2fc0ac720d49435-bc90-40f5-84ff-39543375146c01Z2202410112AE2024101120241011Processed with Action Required           32976 B                                                      William                            B              Smallman                                     20020618578228003         5625012456william.smallman@test.com                         2224 Lieman St                          London                        FC00000     GB                                                  112         12     1 1 1 1         WA200106321Arlington High School                                       Arlington                   WA            11  1105000     0          0                     0                     108000    15355    30          0        30           0      0         0      6739   0      0      001002                                                                                                                  1120241011                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         1   20241001                                         FT516632         N 011 3467                                                                                                                                                     8033           17890                         0              41278          63255          31628                                                                              6739   0           1348              000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000                 1      A4    135003146                                                            1                                                                                                             1 530024000023                                                                                                                                                                                                                                                                                                                                                                               NN/A     NN/A     NN/A     NN/A     NN/A     NNNYNNN/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   N/A   NNNNNNNNNNNNNNNNNNNNNN0000000N      N                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               CUI//SP-TAX2023                                                                                                          203                                                                                                                                                                                                                                                                                                                                                   CUI//SP-TAX                                                  104533                        104533                                                           "

func Test_ParseISIR(t *testing.T) {
	p := &ISIRParser2526{}
	rec, err := p.ParseISIR(rawISIR)
	if err != nil {
		t.Error("Error parsing ISIR: ", err)
	}

	// Check record 1
	if rec.YearIndicator != "6" {
		t.Error("Error parsing ISIR YearIndicator: ", rec.YearIndicator)
	}

	// Check record 70
	if rec.StudentHighSchoolName != "Arlington High School" {
		t.Error("Error parsing ISIR StudentHighSchoolName: ", rec.StudentHighSchoolName)
	}

	// Check record 942
	if rec.FTILabelEnd != "CUI//SP-TAX" {
		t.Error("Error parsing ISIR FTILabelEnd: ", rec.FTILabelEnd)
	}
}
